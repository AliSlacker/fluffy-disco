<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/router.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/router.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module services/router */

/**
 * all the routing in the frontend will be handled by this object.
 * @namespace
 * @property {method} init - initialize the router see {@link module:services/router~init init}
 * @property {method} go - create page for url without requesting to server see {@link module:services/router~go go}
 */
const router ={

    /**
     * &lt;p>this method initializes the router.&lt;/p>
     * &lt;p>router.go(location.pathname) will ensure that the initial URL is checked. for example the user directly enters the url "site/client/add" into browser.
     * the request first will go to the server. server responds with index.html then router gets initialized. but instead of showing the main page we show the page for the initial URL "site/client/add".  &lt;/p>
     * &lt;p>set every link to call the router.go() function when clicked.&lt;/p>
     * the router will handle history navigation by listening to popstate event.
     * @function init
     */
    init: () => {

        router.go(location.pathname);

        document.querySelectorAll("a").forEach(a => {
            a.addEventListener("click", event => {
                event.preventDefault();
                const href = event.target.getAttribute("href");
                router.go(href);
            })
        })

        window.addEventListener("popstate", event => {
            router.go(event.state.route, false);
        })
    },

    /**
     * &lt;p>This method is responsible for showing the correct page for different URLs&lt;/p>
     * &lt;p>if previous page was scrolled the new page scroll is set to beginning&lt;/p>
     * &lt;p>if page is not found will show 404&lt;/p>
     * @function go
     * @param route {string} - Requested URL String
     * @param addToHistory {boolean} - Add to the pages visited or not. See {@link https://developer.mozilla.org/en-US/docs/Web/API/History history}.  By default it's set to true.
     */
    go: (route , addToHistory = true) =>{

        if(addToHistory){
            history.pushState({route},null,route);
        }

        let pageFound = false; 
        switch (route) {
            case "/client":
                pageFound = true;
                _app.elements.contactList.parentElement.hidden = false;
                _app.elements.editForm.hidden = true;
                _app.elements.insertForm.hidden = true;
                _app.elements.pageNotFound.hidden = true;
                break;
            case "/client/add":
                pageFound = true;
                _app.elements.insertForm.hidden = false;
                _app.elements.editForm.hidden = true;
                _app.elements.contactList.parentElement.hidden = true;
                _app.elements.pageNotFound.hidden = true;
                break;
            default:
                if( new RegExp("^/client/edit/\\d+$").test(route)){
                    pageFound = true;
                    _app.elements.editForm.hidden = false;
                    _app.elements.insertForm.hidden = true;
                    _app.elements.contactList.parentElement.hidden = true;
                    _app.elements.pageNotFound.hidden = true;
                }
                break;
        }

        if (pageFound){
            window.scrollX = 0;
            window.scrollY = 0;
        }
        else{
            _app.elements.form.hidden = true;
            _app.elements.contactList.parentElement.hidden = true;
            _app.elements.pageNotFound.hidden = false;
        }
    }
}

export default router;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-services_api.html">services/api</a></li><li><a href="module-services_data.html">services/data</a></li><li><a href="module-services_elements.html">services/elements</a></li><li><a href="module-services_router.html">services/router</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-services_api-api.html">api</a></li><li><a href="module-services_router-router.html">router</a></li><li><a href="window._app.html">_app</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Sep 14 2023 18:47:03 GMT+0330 (Iran Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
